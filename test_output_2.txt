[dotenv@17.3.1] injecting env (0) from .env -- tip: โ๏ธ  enable debug logging with { debug: true }


  ๐ฏ COMPREHENSIVE Governance Test Suite
    1๏ธโฃ Token & Delegation System
      โ Should deploy with correct initial supply (78ms)
      โ Should have correct token name and symbol
      โ Should allow delegation to self
      โ Should emit DelegateChanged event
      โ Should allow delegation to another address
      โ Should allow re-delegation
      โ Should update voting power on token transfer
    2๏ธโฃ Proposal Creation & Threshold
      โ Should reject proposal from user below threshold
      โ Should allow proposal from user with sufficient voting power
      โ Should check VOTING POWER, not raw balance
      โ Should emit ProposalCreated with correct parameters
      โ Should set correct voting type (Standard)
      โ Should set correct voting type (Quadratic)
    3๏ธโฃ Proposal States & Lifecycle
      โ Should start in Pending state (state = 0)
      โ Should transition to Active after voting delay
      โ Should transition to Defeated if quorum not met
      โ Should transition to Succeeded if quorum met and majority for
      โ Should transition to Defeated if majority against
    4๏ธโฃ Standard Voting (1T1V)
      โ Should count votes 1:1 with voting power
      โ Should emit VoteCast event
      1) Should prevent double voting
      โ Should allow multiple voters on same proposal
      โ Should count abstain votes separately
    5๏ธโฃ Quadratic Voting Mechanism
      โ Should calculate cost correctly: cost = votesยฒ/1e18
      2) Should allow multiple QV votes until power exhausted
      โ Should reject if insufficient voting power
      โ Should reject zero votes
      โ Should NOT transfer tokens during QV voting
      โ Should return correct remaining power
      โ Should reject QV on standard proposal
    6๏ธโฃ Snapshot-Based Voting Power
      โ Should use voting power from proposal creation block
      โ Should lock voting power even if tokens transferred
      โ Should use correct snapshot block number
    7๏ธโฃ Quorum Calculation & Enforcement
      โ Should calculate 4% quorum correctly
      โ Should defeat proposal when quorum not met
      โ Should pass proposal when quorum met
    8๏ธโฃ Voting Period Boundaries
      โ Should accept votes during Active period
      โ Should reject votes after voting ends
      โ Should have voting period of 50,400 blocks
      โ Should have voting delay of 0 blocks
    9๏ธโฃ Pause Mechanism & Security
      โ Should allow owner to pause
      โ Should reject non-owner pause attempts
      โ Should prevent voting when paused
      โ Should allow unpause and resume operations
    ๐ Edge Cases & Integration
      โ Should handle maximum possible QV votes without overflow
      โ Should handle proposal with empty description
      โ Full lifecycle: Create โ Vote โ Succeed
      โ Should handle multiple simultaneous proposals


  46 passing (222ms)
  2 failing

  1) ๐ฏ COMPREHENSIVE Governance Test Suite
       4๏ธโฃ Standard Voting (1T1V)
         Should prevent double voting:
     AssertionError: Expected transaction to be reverted with reason 'GovernorVotingSimple: vote already cast', but it reverted with a custom error
      at Context.<anonymous> (test/Governance.test.js:379:13)

  2) ๐ฏ COMPREHENSIVE Governance Test Suite
       5๏ธโฃ Quadratic Voting Mechanism
         Should allow multiple QV votes until power exhausted:
     Error: VM Exception while processing transaction: reverted with custom error 'GovernorAlreadyCastVote("0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC")'
    at MyGovernor.state (@openzeppelin/contracts/governance/Governor.sol:158)
    at MyGovernor._countVote (contracts/MyGovernor.sol:177)
    at MyGovernor._castVote (@openzeppelin/contracts/governance/Governor.sol:637)
    at MyGovernor._castVote (contracts/MyGovernor.sol:223)
    at MyGovernor.castQuadraticVote (contracts/MyGovernor.sol:158)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:453:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:185:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.castQuadraticVote (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/Governance.test.js:447:13)
  



ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mSolidity and Network Configuration[22m[39m                                                                         โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [36mSolidity: 0.8.24[39m       ยท  [36mOptim: true[39m    ยท  [36mRuns: 200[39m    ยท  [36mviaIR: false[39m   ยท     [36mBlock: 60,000,000 gas[39m     โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mMethods[22m[39m                                                                                                    โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mContracts / Methods[22m[39m    ยท  [1mMin[22m            ยท  [1mMax[22m          ยท  [1mAvg[22m            ยท  [1m# calls[22m       ยท  [1musd (avg)[22m   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mGovernanceToken[22m        ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      delegate           ยท         [36m95,660[39m  ยท       [31m96,911[39m  ยท         96,004  ยท            11  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      transfer           ยท         [36m56,317[39m  ยท      [31m104,812[39m  ยท         76,953  ยท            10  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mMyGovernor[22m             ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      castQuadraticVote  ยท        [36m139,861[39m  ยท      [31m139,873[39m  ยท        139,867  ยท             6  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      castVote           ยท         [36m70,668[39m  ยท       [31m90,267[39m  ยท         85,487  ยท            20  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      pause              ยท              [90m-[39m  ยท            [90m-[39m  ยท         27,744  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      propose            ยท         [36m80,816[39m  ยท       [31m81,523[39m  ยท         81,428  ยท            42  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      propose            ยท         [36m81,684[39m  ยท      [31m101,644[39m  ยท         94,491  ยท            28  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      unpause            ยท              [90m-[39m  ยท            [90m-[39m  ยท         27,786  ยท             1  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mDeployments[22m[39m                              ยท                                 ยท  [1m% of limit[22m    ยท              โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mGovernanceToken[22m        ยท              [90m-[39m  ยท            [90m-[39m  ยท      1,845,281  ยท         3.1 %  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mMyGovernor[22m             ยท              [90m-[39m  ยท            [90m-[39m  ยท      4,127,717  ยท         6.9 %  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mKey[22m[39m                                                                                                        โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโฏ[22m[39m  Execution gas for this method does not include intrinsic gas overhead                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโณ[22m[39m  Cost was non-zero but below the precision setting for the currency display (see options)                โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35mToolchain:[39m  hardhat                                                                                        โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
